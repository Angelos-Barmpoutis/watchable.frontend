<ng-container *ngIf="!isLoading; else loadingTemplate">
    <div appFadeIn class="images-grid">
        <div
            *ngFor="let image of images | slice: 0 : default.imagesCount; let i = index"
            class="image-item"
            (click)="openViewer(i, $event)"
        >
            <img
                appBackdropPath
                class="grid-image"
                alt="Media image"
                [backdropPath]="image.file_path"
                [size]="backdropSize.w780"
            />
            <div
                *ngIf="i === default.imagesCount - 1 && images.length > default.imagesCount"
                class="more-images"
                (click)="openViewer(i, $event)"
            >
                <span class="counter">+{{ images.length - default.imagesCount }} more</span>
            </div>
        </div>
    </div>

    <app-image-gallery
        [images]="images"
        [selectedIndex]="selectedImageIndex"
        (closeViewer)="closeViewer()"
    ></app-image-gallery>
</ng-container>

<ng-template #loadingTemplate>
    <div appFadeIn class="skeleton-grid">
        <div *ngFor="let i of skeletonArray" class="skeleton-image-item">
            <div class="skeleton-image"></div>
        </div>
    </div>
</ng-template>
