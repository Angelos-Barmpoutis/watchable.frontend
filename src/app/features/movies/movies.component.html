<section>
    <app-featured-banner [featuredItem]="nowPlaying[0]" [type]="mediaType.Movie" [isLoading]="isMainContentLoading">
    </app-featured-banner>
</section>

<div class="wrapper">
    <section>
        <header>
            <app-section-header redirectUrl="now-playing" title="Now Playing Movies" [isLoading]="isMainContentLoading">
            </app-section-header>
        </header>
        <app-carousel-media [type]="mediaType.Movie" [items]="nowPlaying | slice: 1" [isLoading]="isMainContentLoading">
        </app-carousel-media>
    </section>

    <section>
        <header>
            <app-section-header redirectUrl="popular" title="Popular Movies Today" [isLoading]="isMainContentLoading">
            </app-section-header>
        </header>
        <app-carousel-media [type]="mediaType.Movie" [items]="popular" [isLoading]="isMainContentLoading">
        </app-carousel-media>
    </section>

    <section>
        <header>
            <app-section-header redirectUrl="top-rated" title="Top Rated Movies" [isLoading]="isMainContentLoading">
            </app-section-header>
        </header>
        <app-carousel-media [type]="mediaType.Movie" [items]="topRated" [isLoading]="isMainContentLoading">
        </app-carousel-media>
    </section>

    <section>
        <header>
            <app-section-header redirectUrl="upcoming" title="Upcoming Movies" [isLoading]="isMainContentLoading">
            </app-section-header>
        </header>
        <app-carousel-media [type]="mediaType.Movie" [items]="upcoming" [isLoading]="isMainContentLoading">
        </app-carousel-media>
    </section>

    @for (genre of loadedGenres; track genre.genreName) {
        <section>
            <header>
                <app-section-header
                    [isLoading]="isMainContentLoading"
                    [title]="genre.genreName + ' Movies'"
                    [redirectUrl]="['discover', genre.genreName]"
                >
                </app-section-header>
            </header>
            <app-carousel-media [type]="genre.type" [items]="genre.items" [isLoading]="isMainContentLoading">
            </app-carousel-media>
        </section>
    }
</div>

@if (!allGenresLoaded) {
    <app-infinite-scroll-loader [disabled]="isLoadingMoreGenres" (scrolled)="loadMore()"></app-infinite-scroll-loader>
}
